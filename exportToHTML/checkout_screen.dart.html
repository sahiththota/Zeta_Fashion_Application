<html>
<head>
<title>checkout_screen.dart</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #0033b3;}
.s3 { color: #8c8c8c; font-style: italic;}
.s4 { color: #1750eb;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
checkout_screen.dart</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">'package:flutter/material.dart'</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">'package:zeta_fashion_application/home_page.dart'</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">'package:razorpay_flutter/razorpay_flutter.dart'</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">'package:fluttertoast/fluttertoast.dart'</span><span class="s0">;</span>

<span class="s2">void </span><span class="s0">main(){</span>
  <span class="s0">runApp(</span><span class="s2">const </span><span class="s0">MaterialApp(</span>
    <span class="s0">home: CheckoutScreen(),</span>
  <span class="s0">));</span>
<span class="s0">}</span>


<span class="s2">class </span><span class="s0">CheckoutScreen </span><span class="s2">extends </span><span class="s0">StatelessWidget {</span>
  <span class="s2">const </span><span class="s0">CheckoutScreen({Key? key}) : </span><span class="s2">super</span><span class="s0">(key: key);</span>

  <span class="s0">@override</span>
  <span class="s0">Widget build(BuildContext context) {</span>
    <span class="s2">return const </span><span class="s0">MaterialApp(</span>
      <span class="s0">home: CheckoutScreenState(),</span>
    <span class="s0">);</span>
  <span class="s0">}</span>
<span class="s0">}</span>


<span class="s2">class </span><span class="s0">CheckoutScreenState </span><span class="s2">extends </span><span class="s0">StatefulWidget {</span>
  <span class="s2">const </span><span class="s0">CheckoutScreenState({Key? key}) : </span><span class="s2">super</span><span class="s0">(key: key);</span>

  <span class="s0">@override</span>
  <span class="s0">_CheckoutScreenState createState() =&gt; _CheckoutScreenState();</span>
<span class="s0">}</span>

<span class="s2">class </span><span class="s0">_CheckoutScreenState </span><span class="s2">extends </span><span class="s0">State&lt;CheckoutScreenState&gt; {</span>

  <span class="s0">late Razorpay _razorpay;</span>
  <span class="s0">@override</span>
  <span class="s0">Widget build(BuildContext context) {</span>
    <span class="s2">return </span><span class="s0">Scaffold(</span>
      <span class="s0">bottomSheet: SizedBox(</span>
        <span class="s0">width: MediaQuery.of(context).size.width,</span>
        <span class="s3">// ignore: deprecated_member_use</span>
        <span class="s0">child: RaisedButton(</span>
            <span class="s0">padding: </span><span class="s2">const </span><span class="s0">EdgeInsets.all(</span><span class="s4">20</span><span class="s0">),</span>
            <span class="s0">elevation: </span><span class="s4">3.0</span><span class="s0">,</span>
            <span class="s0">color: Colors.deepOrange,</span>
            <span class="s0">onPressed: (){</span>
              <span class="s0">openCheckout();</span>
            <span class="s0">},</span>
            <span class="s0">child: </span><span class="s2">const </span><span class="s0">Text(</span><span class="s1">&quot;Proceed to Payment&quot;</span><span class="s0">, style: TextStyle(color: Colors.black),)</span>
        <span class="s0">),</span>
      <span class="s0">),</span>
      <span class="s0">backgroundColor: Colors.black,</span>
      <span class="s0">appBar: AppBar(</span>
        <span class="s0">centerTitle: </span><span class="s2">true</span><span class="s0">,</span>
        <span class="s0">backgroundColor: Colors.black,</span>
        <span class="s0">title:</span>
           <span class="s2">const </span><span class="s0">Text(</span><span class="s1">&quot;Check Out&quot;</span><span class="s0">),</span>
        <span class="s0">actions:  [</span>
          <span class="s0">Align(</span>
              <span class="s0">alignment: Alignment.center,</span>
              <span class="s3">// ignore: deprecated_member_use</span>
              <span class="s0">child: ElevatedButton(</span>
                  <span class="s0">style: ElevatedButton.styleFrom(</span>
                    <span class="s0">primary: Colors.orangeAccent,</span>
                    <span class="s0">elevation: </span><span class="s4">3</span><span class="s0">,</span>
                    <span class="s0">shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(</span><span class="s4">10.0</span><span class="s0">)),</span>
                    <span class="s0">minimumSize: </span><span class="s2">const </span><span class="s0">Size(</span><span class="s4">25</span><span class="s0">, </span><span class="s4">25</span><span class="s0">),</span>
                  <span class="s0">),</span>
                <span class="s0">onPressed: () =&gt;{</span>
                <span class="s0">Navigator.push(context, MaterialPageRoute(builder: (context) =&gt; </span><span class="s2">const </span><span class="s0">HomePage()))</span>
              <span class="s0">}, child: </span><span class="s2">const </span><span class="s0">Text(</span><span class="s1">&quot;cancel&quot;</span><span class="s0">, style: TextStyle(fontSize: </span><span class="s4">15</span><span class="s0">, fontWeight: FontWeight.normal, color: Colors.white),),</span>

              <span class="s0">)</span>
          <span class="s0">),</span>
        <span class="s0">],</span>
      <span class="s0">),</span>

      <span class="s0">body: SizedBox(</span>
        <span class="s0">child:  SingleChildScrollView(</span>
          <span class="s0">child:  Column(</span>
            <span class="s0">children: [</span>
              <span class="s0">Padding(</span>
                <span class="s0">padding: </span><span class="s2">const </span><span class="s0">EdgeInsets.all(</span><span class="s4">15.0</span><span class="s0">),</span>
                <span class="s0">child: Row(</span>
                  <span class="s0">children: [</span>
                    <span class="s0">SizedBox(</span>
                      <span class="s0">width: </span><span class="s4">100</span><span class="s0">,</span>
                      <span class="s0">child: AspectRatio(</span>
                        <span class="s0">aspectRatio: </span><span class="s4">0.88</span><span class="s0">,</span>
                        <span class="s0">child: Container(</span>
                          <span class="s0">height: MediaQuery.of(context).size.width - </span><span class="s4">150</span><span class="s0">,</span>
                          <span class="s0">decoration: BoxDecoration(</span>
                            <span class="s0">color: </span><span class="s2">const </span><span class="s0">Color(</span><span class="s4">0xFFF5F6F9</span><span class="s0">),</span>
                            <span class="s0">borderRadius: BorderRadius.circular(</span><span class="s4">15</span><span class="s0">),</span>
                            <span class="s0">image: </span><span class="s2">const </span><span class="s0">DecorationImage(</span>
                              <span class="s0">image: AssetImage(</span><span class="s1">&quot;assets/men.jpg&quot;</span><span class="s0">),</span>
                              <span class="s0">fit: BoxFit.contain,</span>
                            <span class="s0">),</span>
                          <span class="s0">),</span>
                        <span class="s0">),</span>
                      <span class="s0">),</span>
                    <span class="s0">),</span>

                    <span class="s2">const </span><span class="s0">SizedBox(width: </span><span class="s4">20</span><span class="s0">,),</span>
                    <span class="s0">Column(</span>
                      <span class="s0">crossAxisAlignment: CrossAxisAlignment.start,</span>
                      <span class="s0">children: [</span>
                        <span class="s0">Row(</span>
                          <span class="s0">children: [</span>
                            <span class="s2">const </span><span class="s0">Text(</span>
                              <span class="s1">&quot;Mens shirt by Puma&quot;</span><span class="s0">, style: TextStyle(color: Colors.white, fontSize: </span><span class="s4">16</span><span class="s0">,),</span>
                              <span class="s0">maxLines: </span><span class="s4">2</span><span class="s0">,</span>
                            <span class="s0">),</span>
                            <span class="s2">const </span><span class="s0">SizedBox(width: </span><span class="s4">70</span><span class="s0">,),</span>
                            <span class="s0">Container(</span>
                              <span class="s0">margin: </span><span class="s2">const </span><span class="s0">EdgeInsets.fromLTRB(</span><span class="s4">0.0</span><span class="s0">, </span><span class="s4">20.0</span><span class="s0">, </span><span class="s4">0.0</span><span class="s0">, </span><span class="s4">0.0</span><span class="s0">),</span>
                              <span class="s0">decoration: BoxDecoration(</span>
                                <span class="s0">color: Colors.white,</span>
                                <span class="s0">borderRadius: BorderRadius.circular(</span><span class="s4">15</span><span class="s0">),</span>
                              <span class="s0">),</span>
                              <span class="s0">child:   </span><span class="s2">const </span><span class="s0">Icon(Icons.delete, size: </span><span class="s4">30</span><span class="s0">, color: Colors.black,),</span>
                            <span class="s0">),</span>

                          <span class="s0">],</span>
                        <span class="s0">),</span>

                        <span class="s2">const </span><span class="s0">Text.rich(TextSpan(</span>
                            <span class="s0">text: </span><span class="s1">&quot;\$50.99&quot;</span><span class="s0">, style: </span><span class="s2">const </span><span class="s0">TextStyle(fontWeight: FontWeight.w800, color: Colors.deepOrange),</span>
                            <span class="s0">children: [</span>
                              <span class="s2">const </span><span class="s0">TextSpan(</span>
                                  <span class="s0">text: </span><span class="s1">&quot; x2&quot;</span><span class="s0">,</span>
                                  <span class="s0">style: </span><span class="s2">const </span><span class="s0">TextStyle(color: Colors.white,)</span>
                              <span class="s0">)</span>
                            <span class="s0">]</span>
                        <span class="s0">))</span>
                      <span class="s0">],</span>
                    <span class="s0">)</span>

                  <span class="s0">], ),</span>
              <span class="s0">),</span>



              <span class="s0">Padding(</span>
                <span class="s0">padding: </span><span class="s2">const </span><span class="s0">EdgeInsets.all(</span><span class="s4">15.0</span><span class="s0">),</span>
                <span class="s0">child: Row(</span>
                  <span class="s0">children: [</span>
                    <span class="s0">SizedBox(</span>
                      <span class="s0">width: </span><span class="s4">100</span><span class="s0">,</span>
                      <span class="s0">child: AspectRatio(</span>
                        <span class="s0">aspectRatio: </span><span class="s4">0.88</span><span class="s0">,</span>
                        <span class="s0">child: Container(</span>
                          <span class="s0">height: MediaQuery.of(context).size.width - </span><span class="s4">150</span><span class="s0">,</span>
                          <span class="s0">decoration: BoxDecoration(</span>
                            <span class="s0">color: </span><span class="s2">const </span><span class="s0">Color(</span><span class="s4">0xFFF5F6F9</span><span class="s0">),</span>
                            <span class="s0">borderRadius: BorderRadius.circular(</span><span class="s4">15</span><span class="s0">),</span>
                            <span class="s0">image: </span><span class="s2">const </span><span class="s0">DecorationImage(</span>
                              <span class="s0">image: </span><span class="s2">const </span><span class="s0">AssetImage(</span><span class="s1">&quot;assets/men.jpg&quot;</span><span class="s0">),</span>
                              <span class="s0">fit: BoxFit.contain,</span>
                            <span class="s0">),</span>
                          <span class="s0">),</span>
                        <span class="s0">),</span>
                      <span class="s0">),</span>
                    <span class="s0">),</span>

                    <span class="s2">const </span><span class="s0">SizedBox(width:</span><span class="s4">20</span><span class="s0">,),</span>
                    <span class="s0">Column(</span>
                      <span class="s0">crossAxisAlignment: CrossAxisAlignment.start,</span>
                      <span class="s0">children: [</span>
                        <span class="s0">Row(</span>
                          <span class="s0">children: [</span>
                            <span class="s2">const </span><span class="s0">Text(</span>
                              <span class="s1">&quot;Mens shirt by Puma&quot;</span><span class="s0">, style: </span><span class="s2">const </span><span class="s0">TextStyle(color: Colors.white, fontSize: </span><span class="s4">16</span><span class="s0">,),</span>
                              <span class="s0">maxLines: </span><span class="s4">2</span><span class="s0">,</span>
                            <span class="s0">),</span>
                            <span class="s2">const </span><span class="s0">SizedBox(width: </span><span class="s4">70</span><span class="s0">,),</span>
                            <span class="s0">Container(</span>
                              <span class="s0">margin: </span><span class="s2">const </span><span class="s0">EdgeInsets.fromLTRB(</span><span class="s4">0.0</span><span class="s0">, </span><span class="s4">20.0</span><span class="s0">, </span><span class="s4">0.0</span><span class="s0">, </span><span class="s4">0.0</span><span class="s0">),</span>
                              <span class="s0">decoration: BoxDecoration(</span>
                                <span class="s0">color: Colors.white,</span>
                                <span class="s0">borderRadius: BorderRadius.circular(</span><span class="s4">15</span><span class="s0">),</span>
                              <span class="s0">),</span>
                              <span class="s0">child:   </span><span class="s2">const </span><span class="s0">Icon(Icons.delete, size: </span><span class="s4">30</span><span class="s0">, color: Colors.black,),</span>
                            <span class="s0">),</span>

                          <span class="s0">],</span>
                        <span class="s0">),</span>

                        <span class="s2">const </span><span class="s0">Text.rich(TextSpan(</span>
                            <span class="s0">text: </span><span class="s1">&quot;\$50.99&quot;</span><span class="s0">, style: TextStyle(fontWeight: FontWeight.w800, color: Colors.deepOrange),</span>
                            <span class="s0">children: [</span>
                              <span class="s0">TextSpan(</span>
                                  <span class="s0">text: </span><span class="s1">&quot; x2&quot;</span><span class="s0">,</span>
                                  <span class="s0">style: TextStyle(color: Colors.white,)</span>
                              <span class="s0">)</span>
                            <span class="s0">]</span>
                        <span class="s0">))</span>
                      <span class="s0">],</span>
                    <span class="s0">)</span>

                  <span class="s0">], ),</span>
              <span class="s0">),</span>




              <span class="s2">const </span><span class="s0">SizedBox(height: </span><span class="s4">50</span><span class="s0">),</span>
              <span class="s3">// ElevatedButton(</span>
              <span class="s3">//     style: ElevatedButton.styleFrom(primary: Colors.orange,),</span>
              <span class="s3">//     onPressed: (){</span>
              <span class="s3">//       openCheckout();</span>
              <span class="s3">//     },</span>
              <span class="s3">//     child: Text(&quot;Proceed to Payment&quot;, style: TextStyle(color: Colors.black),))</span>
            <span class="s0">],</span>
          <span class="s0">),</span>
        <span class="s0">),</span>
      <span class="s0">)</span>
           <span class="s0">);</span>
  <span class="s0">}</span>


  <span class="s0">@override</span>
  <span class="s2">void </span><span class="s0">initState() {</span>
    <span class="s2">super</span><span class="s0">.initState();</span>
    <span class="s0">_razorpay = Razorpay();</span>
    <span class="s0">_razorpay.on(Razorpay.EVENT_PAYMENT_SUCCESS, _handlePaymentSuccess);</span>
    <span class="s0">_razorpay.on(Razorpay.EVENT_PAYMENT_ERROR, _handlePaymentError);</span>
    <span class="s0">_razorpay.on(Razorpay.EVENT_EXTERNAL_WALLET, _handleExternalWallet);</span>
  <span class="s0">}</span>

  <span class="s0">@override</span>
  <span class="s2">void </span><span class="s0">dispose() {</span>
    <span class="s2">super</span><span class="s0">.dispose();</span>
    <span class="s0">_razorpay.clear();</span>
  <span class="s0">}</span>

  <span class="s2">void </span><span class="s0">openCheckout() async {</span>
    <span class="s2">var </span><span class="s0">options = {</span>
      <span class="s1">'key'</span><span class="s0">: </span><span class="s1">'rzp_live_ILgsfZCZoFIKMb'</span><span class="s0">,</span>
      <span class="s1">'amount'</span><span class="s0">: </span><span class="s4">100</span><span class="s0">,</span>
      <span class="s1">'name'</span><span class="s0">: </span><span class="s1">'Acme Corp.'</span><span class="s0">,</span>
      <span class="s1">'description'</span><span class="s0">: </span><span class="s1">'Fine T-Shirt'</span><span class="s0">,</span>
      <span class="s1">'retry'</span><span class="s0">: {</span><span class="s1">'enabled'</span><span class="s0">: </span><span class="s2">true</span><span class="s0">, </span><span class="s1">'max_count'</span><span class="s0">: </span><span class="s4">1</span><span class="s0">},</span>
      <span class="s1">'send_sms_hash'</span><span class="s0">: </span><span class="s2">true</span><span class="s0">,</span>
      <span class="s1">'prefill'</span><span class="s0">: {</span><span class="s1">'contact'</span><span class="s0">: </span><span class="s1">'8888888888'</span><span class="s0">, </span><span class="s1">'email'</span><span class="s0">: </span><span class="s1">'test@razorpay.com'</span><span class="s0">},</span>
      <span class="s1">'external'</span><span class="s0">: {</span>
        <span class="s1">'wallets'</span><span class="s0">: [</span><span class="s1">'paytm'</span><span class="s0">]</span>
      <span class="s0">}</span>
    <span class="s0">};</span>

    <span class="s2">try </span><span class="s0">{</span>
      <span class="s0">_razorpay.open(options);</span>
    <span class="s0">} </span><span class="s2">catch </span><span class="s0">(e) {</span>
      <span class="s0">debugPrint(</span><span class="s1">'Error: e'</span><span class="s0">);</span>
    <span class="s0">}</span>
  <span class="s0">}</span>

  <span class="s2">void </span><span class="s0">_handlePaymentSuccess(PaymentSuccessResponse response) {</span>
    <span class="s0">print(</span><span class="s1">'Success Response: </span><span class="s0">$response</span><span class="s1">'</span><span class="s0">);</span>
    <span class="s0">Fluttertoast.showToast(</span>
        <span class="s0">msg: </span><span class="s1">&quot;SUCCESS: &quot; </span><span class="s0">+ response.paymentId!,</span>
        <span class="s0">toastLength: Toast.LENGTH_SHORT);</span>
  <span class="s0">}</span>

  <span class="s2">void </span><span class="s0">_handlePaymentError(PaymentFailureResponse response) {</span>
    <span class="s0">print(</span><span class="s1">'Error Response: </span><span class="s0">$response</span><span class="s1">'</span><span class="s0">);</span>
     <span class="s0">Fluttertoast.showToast(</span>
        <span class="s0">msg: </span><span class="s1">&quot;ERROR: &quot; </span><span class="s0">+ response.code.toString() + </span><span class="s1">&quot; - &quot; </span><span class="s0">+ response.message!,</span>
        <span class="s0">toastLength: Toast.LENGTH_SHORT);</span>
  <span class="s0">}</span>

  <span class="s2">void </span><span class="s0">_handleExternalWallet(ExternalWalletResponse response) {</span>
    <span class="s0">print(</span><span class="s1">'External SDK Response: </span><span class="s0">$response</span><span class="s1">'</span><span class="s0">);</span>
     <span class="s0">Fluttertoast.showToast(</span>
        <span class="s0">msg: </span><span class="s1">&quot;EXTERNAL_WALLET: &quot; </span><span class="s0">+ response.walletName!,</span>
        <span class="s0">toastLength: Toast.LENGTH_SHORT);</span>
  <span class="s0">}</span>
<span class="s0">}</span>
</pre>
</body>
</html>